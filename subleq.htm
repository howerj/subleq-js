<!DOCTYPE html>
<html lang="en">
<head>
	<title>SUBLEQ eForth</title>
	<meta charset="UTF-8">
	<style type="text/css">
		body{margin:40px auto;max-width:50%;line-height:1.6;font-size:18px;color:#444;padding:0 10px;}
		pre { white-space: pre-wrap; }
		.tab { overflow: hidden; border: 1px solid #ccc; background-color: #f1f1f1; }
		.tab button { background-color: inherit; float: left; border: none; outline: none; cursor: pointer; padding: 14px 16px; transition: 0.3s; }
		.tab button:hover { background-color: #ddd; }
		.tab button.active { background-color: #ccc; }
		.tabcontent { display: none; padding: 6px 12px; border: 1px solid #ccc; border-top: none; }
		.blink { animation: blinker 0.6s linear infinite; color: #333333; font-size: 24px; font-weight: bold; }
		@keyframes blinker { 50% { opacity: 0; } }
		label.buttonHack input[type="file"] { position:absolute; top: -1000px; }
		.buttonHack { border: 2px solid #AAA; border-radius: 4px; padding: 2px 5px; margin: 2px; background: #DDD; display: inline-block; }
		.buttonHack :hover { background: #CCC; }
		.buttonHack :active { background: #CCF; }
	</style>
</head>
<body>
	<div class="tab">
		<button class="tablinks" onclick="openTab(event, 'subleq')">subleq</button>
		<button class="tablinks" onclick="openTab(event, 'image')">image</button>
		<button class="tablinks" onclick="openTab(event, 'settings')">settings</button>
		<button class="tablinks" onclick="openTab(event, 'help')">help</button>
		<button class="tablinks" onclick="openTab(event, 'about')">about</button>
	</div>
	<div id="subleq" class="tabcontent"> </div>
	<div id="help"   class="tabcontent">
		<p>This system contains a <a href=" https://en.wikipedia.org/wiki/One-instruction_set_computer">SUBLEQ</a>
		virtual machine, a 16-bit version, that will automatically boot an eForth image, which is a variant of
		<a href="https://en.wikipedia.org/wiki/Forth_(programming_language)">Forth</a>, a stack
		based programming language suitable for constrained system.  What makes this system special
		is that SUBLEQ is a Turing complete <i>single instruction</i> machine, the instruction
		is short for "Subtract and Branch If Less Than Or Equal To Zero", it does a little more
		than that, but it means we do not have access to multiplication, division, addition,
		or even the basic bitwise operators such as AND or XOR in the base instruction set,
		nor calls, returns, or indirect load/stores. They all have to be synthesized.</p>
		<p>Each SUBLEQ instruction consists of three arguments; 'a', 'b', 'c'. 'a' and 'b'
		are addresses from which arguments are loaded from, the contents of the address
		of 'a' are subtracted from the contents at 'b' and stored back into 'b', if the
		result is less than or equal to zero, then 'c' is directly jumped to, otherwise
		the program counter is incremented by three, moving to the next instruction.</p>
		<p>There are two minor special cases, one for input, and one for output, if 'a'
		is the address -1, then byte is loaded from input and stored into the location
		pointed to by 'b', if 'b' is -1 then a byte is loaded from the location pointed
		to by 'a' and stored to output. Input is taken from the keyboard and output is
		the terminal screen in the case of this emulator.</p>
		<p>The following program, written in C, is capable of executing the same images
		that are used within this program:</p>
		<pre>
	#include &lt;stdio.h&gt;
	int main(int x,char**v){FILE*f=fopen(v[1],"r");short p=0,m[1&lt;&lt;16],*i=m;
	while(fscanf(f,"%hd",i++)&gt;0);for(;p&gt;=0;){int a=m[p++],b=m[p++],c=m[p++];
	a&lt;0?m[b]=getchar():b&lt;0?putchar(m[a]):(m[b]-=m[a])&lt;=0?p=c:0;}}
		</pre>
		<p> A Forth tutorial is beyond this help section. However, here are a few commands
		you can type into the system to get started: </p>
		<pre> words </pre>
		<p>This will print out a list of all of the built in functions defined in Forth.</p>
		<pre> 2 2 + . cr </pre>
		<p>Add two numbers together, both 2, and print the result, 4 along with a newline.</p>
		<pre> : ahoy cr ." Hello, World!" ; </pre>
		<p>Define a new word (functions are called "words" in Forth) named "ahoy", which when
		called like so:</p>
		<pre> ahoy </pre>
		<p>Will print the standard greeting. If the Forth interpreter is happy, "ok" will be
		printed out after entering each line. Be careful, white-space matters a lot in Forth.</p>
		<p> You can hit ESC to clear the screen and restart the system. </p>
		<p> The original SUBLEQ system, and images, came from another project of mine
		available at <a href="https://github.com/howerj/subleq">https://github.com/howerj/subleq</a>.
		You can find and load newer images there, specifically 
		<a href="https://raw.githubusercontent.com/howerj/subleq/master/subleq.dec">here</a>, which
		you should be able to load from "image" tab. The system is self-hosting, it can be used
		to generate new eForth images if fed the right source code, although that is best done
		from the command line and not on this web-site.
		</p>
		<p>
		The following file contains a program that can be loaded that prints "Hi", 
		<a href="data:application/octet-stream;charset=utf-8;base64,OQotMQozCjEwCi0xCjYKMAowCi0xCjcyCjEwNQowCg==">hi.dec</a>.
		</p>
		<p> Happy hacking! </p>
	</div>
	<div id="about" class="tabcontent">
		<table style="width:100%">
			<tr><th>Author</th><td>Richard James Howe</td></tr>
			<tr><th>Project</th><td>eForth running on SUBLEQ</td></tr>
			<tr><th>Email</th><td><a href="mailto:howe.r.j.89@gmail.com?subject=eForth SUBLEQ">howe.r.j.89@gmail.com</a></td></tr>
			<tr><th>Repo</th><td><a href="https://github.com/howerj/subleq-js">https://github.com/howerj/subleq-js</a></td></tr>
			<tr><th>License</th><td><a href="https://raw.githubusercontent.com/howerj/subleq/master/LICENSE">The Unlicense</a> / Public Domain</td></tr>
		</table>
	</div>
	<div id="settings" class="tabcontent">
		<input type="checkbox" id="highlight" name="highlight" onchange="saveCookies()" checked>
		<label for="highlight">highlight </label><br>
		<input type="checkbox" id="scroll" name="scroll" onchange="saveCookies()"  checked>
		<label for="scroll">scroll </label><br>
		<input type="checkbox" id="optimizeImage" name="optimizeImage" onchange="saveCookies()" checked>
		<label for="optimizeImage">remove trailing zeros on save </label><br>
		<label for="base">base </label>
		<input type="number" id="base" name="base" min="2" max="36" onchange="saveCookies()" value=16>
	</div>
	<div id="image" class="tabcontent">
		<div>
			<label class="buttonHack"> <button hidden onclick="saveImage()">save</button> <span>save</span></label>
			<label for="fname">file</label>
			<input type="text" id="fname" name="fname" value="subleq.dec">
			<label for="cells">cells</label>
			<input type="text" id="cells" name="cells" value="8192">
		</div>
		<label class="buttonHack">
			<input type="file" id="input" oninput="loadImage()">
			<span>load</span>
		</label>
		<hr>
		<pre id="dump"></pre>
	</div>
	<canvas id="keydown"></canvas>
	<script type="text/javascript">
		const init = ".( EFORTH LOADED - USED:) here u. cr\n";
		var screen = "", input = init, cursor = '<b class="blink">_</b>';
		var loaded = false, focused = false, running = true, reloadOnExit = true;
		var redrawTimeout;
		var pc = 0, cycles = 0, total = 0, m = new Uint16Array(65536);
		var eForth = [
			0, 0, 52, 11, 12992, 3409, 22916, -32768, -2, -1, 1, 2, 16, 0, 6462,
			7834, 9054, 10530, 12494, 9054, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 10, -1, 0,
			0, 12974, 0, 0, 0, 0, 0, 0, 0, 0, 0, 90, 12974, 11022, 12786, -32768,
			-32768, 32512, 32512, 49, 49, 55, 48, 0, 58, 0, 49, 61, 0, 0, 64, 51,
			51, 67, 50, 0, 70, 0, 51, 73, 0, 0, 76, 20, 20, 79, 14, 0, 82, 0, 20,
			85, 0, 0, 88, 21, 21, 91, 20, 0, 94, 0, 21, 97, 0, 0, 100, 9, 20, 103,
			118, 118, 106, 21, 0, 109, 0, 118, 112, 0, 0, 115, 23, 23, 118, 0, 0,
			121, 0, 23, 124, 0, 0, 127, 21, 21, 130, 23, 0, 133, 0, 21, 136, 0, 0,
			139, 5, 23, 142, 23, 0, 148, 0, 0, 151, 0, 0, 166, 165, 165, 154, 21,
			0, 157, 0, 165, 160, 0, 0, 163, 0, 0, 166, 9, 51, 169, 205, 205, 172,
			51, 0, 175, 0, 205, 178, 0, 0, 181, 206, 206, 184, 51, 0, 187, 0, 206,
			190, 0, 0, 193, 212, 212, 196, 51, 0, 199, 0, 212, 202, 0, 0, 205, 0,
			0, 208, 20, 0, 211, 0, 0, 214, 0, 0, 217, 20, 20, 220, 21, 0, 223, 0,
			20, 226, 0, 0, 229, 0, 0, 88, 0, 0, -1, 0, 0, 88, 10, 27, 241, 0, 0,
			88, 9, 27, 247, 0, 0, 88, 13, 13, 253, 27, 13, 256, 27, 27, 259, 13, 0,
			262, 0, 27, 265, 0, 0, 268, 10, 27, 271, 0, 0, 88, 289, 289, 277, 27, 0,
			280, 0, 289, 283, 0, 0, 286, 27, 27, 289, 0, 0, 292, 0, 27, 295, 0, 0,
			298, 0, 0, 88, 316, 316, 304, 49, 0, 307, 0, 316, 310, 0, 0, 313, 21,
			21, 316, 0, 0, 319, 0, 21, 322, 0, 0, 325, 361, 361, 328, 27, 0, 331,
			0, 361, 334, 0, 0, 337, 362, 362, 340, 27, 0, 343, 0, 362, 346, 0, 0,
			349, 368, 368, 352, 27, 0, 355, 0, 368, 358, 0, 0, 361, 0, 0, 364, 21,
			0, 367, 0, 0, 370, 0, 0, 373, 9, 49, 376, 391, 391, 379, 49, 0, 382, 0,
			391, 385, 0, 0, 388, 27, 27, 391, 0, 0, 394, 0, 27, 397, 0, 0, 400, 9,
			49, 403, 0, 0, 88, 27, -1, 409, 424, 424, 412, 49, 0, 415, 0, 424, 418,
			0, 0, 421, 27, 27, 424, 0, 0, 427, 0, 27, 430, 0, 0, 433, 9, 49, 436, 0,
			0, 88, 10, 49, 442, 478, 478, 445, 49, 0, 448, 0, 478, 451, 0, 0, 454,
			479, 479, 457, 49, 0, 460, 0, 479, 463, 0, 0, 466, 485, 485, 469, 49,
			0, 472, 0, 485, 475, 0, 0, 478, 0, 0, 481, 27, 0, 484, 0, 0, 487, 0, 0,
			490, 505, 505, 493, 20, 0, 496, 0, 505, 499, 0, 0, 502, 27, 27, 505, 0,
			0, 508, 0, 27, 511, 0, 0, 514, 9, 20, 517, 0, 0, 88, 21, 21, 523, 27, 0,
			526, 0, 21, 529, 0, 0, 532, 547, 547, 535, 49, 0, 538, 0, 547, 541, 0,
			0, 544, 27, 27, 547, 0, 0, 550, 0, 27, 553, 0, 0, 556, 592, 592, 559,
			49, 0, 562, 0, 592, 565, 0, 0, 568, 593, 593, 571, 49, 0, 574, 0, 593,
			577, 0, 0, 580, 599, 599, 583, 49, 0, 586, 0, 599, 589, 0, 0, 592, 0, 0,
			595, 21, 0, 598, 0, 0, 601, 0, 0, 604, 0, 0, 88, 10, 49, 610, 646, 646,
			613, 49, 0, 616, 0, 646, 619, 0, 0, 622, 647, 647, 625, 49, 0, 628, 0,
			647, 631, 0, 0, 634, 653, 653, 637, 49, 0, 640, 0, 653, 643, 0, 0, 646,
			0, 0, 649, 27, 0, 652, 0, 0, 655, 0, 0, 658, 0, 0, 88, 676, 676, 664,
			49, 0, 667, 0, 676, 670, 0, 0, 673, 21, 21, 676, 0, 0, 679, 0, 21, 682,
			0, 0, 685, 10, 49, 688, 724, 724, 691, 49, 0, 694, 0, 724, 697, 0, 0,
			700, 725, 725, 703, 49, 0, 706, 0, 725, 709, 0, 0, 712, 731, 731, 715,
			49, 0, 718, 0, 731, 721, 0, 0, 724, 0, 0, 727, 27, 0, 730, 0, 0, 733, 0,
			0, 736, 27, 27, 739, 21, 0, 742, 0, 27, 745, 0, 0, 748, 0, 0, 88, 766,
			766, 754, 49, 0, 757, 0, 766, 760, 0, 0, 763, 27, 27, 766, 0, 0, 769,
			0, 27, 772, 0, 0, 775, 9, 49, 778, 0, 0, 88, 9, 51, 784, 820, 820, 787,
			51, 0, 790, 0, 820, 793, 0, 0, 796, 821, 821, 799, 51, 0, 802, 0, 821,
			805, 0, 0, 808, 827, 827, 811, 51, 0, 814, 0, 827, 817, 0, 0, 820, 0,
			0, 823, 27, 0, 826, 0, 0, 829, 0, 0, 832, 847, 847, 835, 49, 0, 838, 0,
			847, 841, 0, 0, 844, 27, 27, 847, 0, 0, 850, 0, 27, 853, 0, 0, 856, 9,
			49, 859, 0, 0, 88, 10, 49, 865, 901, 901, 868, 49, 0, 871, 0, 901, 874,
			0, 0, 877, 902, 902, 880, 49, 0, 883, 0, 902, 886, 0, 0, 889, 908, 908,
			892, 49, 0, 895, 0, 908, 898, 0, 0, 901, 0, 0, 904, 27, 0, 907, 0, 0,
			910, 0, 0, 913, 928, 928, 916, 51, 0, 919, 0, 928, 922, 0, 0, 925, 27,
			27, 928, 0, 0, 931, 0, 27, 934, 0, 0, 937, 10, 51, 940, 0, 0, 88, 958,
			958, 946, 49, 0, 949, 0, 958, 952, 0, 0, 955, 21, 21, 958, 0, 0, 961,
			0, 21, 964, 0, 0, 967, 23, 23, 970, 21, 0, 976, 0, 0, 982, 0, 0, 979,
			0, 21, 997, 27, 0, 985, 0, 23, 988, 0, 0, 991, 10, 21, 994, 0, 0, 970,
			27, 27, 1000, 23, 0, 1003, 0, 27, 1006, 0, 0, 1009, 9, 49, 1012, 0, 0,
			88, 1030, 1030, 1018, 51, 0, 1021, 0, 1030, 1024, 0, 0, 1027, 20, 20,
			1030, 0, 0, 1033, 0, 20, 1036, 0, 0, 1039, 10, 51, 1042, 0, 0, 88, 1060,
			1060, 1048, 49, 0, 1051, 0, 1060, 1054, 0, 0, 1057, 21, 21, 1060, 0, 0,
			1063, 0, 21, 1066, 0, 0, 1069, 27, 21, 1072, 27, 27, 1075, 21, 0, 1078,
			0, 27, 1081, 0, 0, 1084, 9, 49, 1087, 0, 0, 88, 1105, 1105, 1093, 49, 0,
			1096, 0, 1105, 1099, 0, 0, 1102, 21, 21, 1105, 0, 0, 1108, 0, 21, 1111,
			0, 0, 1114, 21, 0, 1117, 0, 27, 1120, 0, 0, 1123, 9, 49, 1126, 0, 0,
			88, 10, 49, 1132, 1168, 1168, 1135, 49, 0, 1138, 0, 1168, 1141, 0, 0,
			1144, 1169, 1169, 1147, 49, 0, 1150, 0, 1169, 1153, 0, 0, 1156, 1175,
			1175, 1159, 49, 0, 1162, 0, 1175, 1165, 0, 0, 1168, 0, 0, 1171, 27, 0,
			1174, 0, 0, 1177, 0, 0, 1180, 1195, 1195, 1183, 51, 0, 1186, 0, 1195,
			1189, 0, 0, 1192, 27, 27, 1195, 0, 0, 1198, 0, 27, 1201, 0, 0, 1204,
			0, 0, 88, 10, 51, 1210, 0, 0, 88, 10, 49, 1216, 1252, 1252, 1219, 49,
			0, 1222, 0, 1252, 1225, 0, 0, 1228, 1253, 1253, 1231, 49, 0, 1234, 0,
			1253, 1237, 0, 0, 1240, 1259, 1259, 1243, 49, 0, 1246, 0, 1259, 1249,
			0, 0, 1252, 0, 0, 1255, 27, 0, 1258, 0, 0, 1261, 0, 0, 1264, 27, 27,
			1267, 49, 0, 1270, 0, 27, 1273, 0, 0, 1276, 9, 27, 1279, 0, 0, 88, 49,
			49, 1285, 27, 0, 1288, 0, 49, 1291, 0, 0, 1294, 0, 0, 88, 10, 49, 1300,
			1336, 1336, 1303, 49, 0, 1306, 0, 1336, 1309, 0, 0, 1312, 1337, 1337,
			1315, 49, 0, 1318, 0, 1337, 1321, 0, 0, 1324, 1343, 1343, 1327, 49, 0,
			1330, 0, 1343, 1333, 0, 0, 1336, 0, 0, 1339, 27, 0, 1342, 0, 0, 1345, 0,
			0, 1348, 27, 27, 1351, 51, 0, 1354, 0, 27, 1357, 0, 0, 1360, 0, 0, 88,
			51, 51, 1366, 27, 0, 1369, 0, 51, 1372, 0, 0, 1375, 1390, 1390, 1378,
			49, 0, 1381, 0, 1390, 1384, 0, 0, 1387, 27, 27, 1390, 0, 0, 1393, 0, 27,
			1396, 0, 0, 1399, 9, 49, 1402, 0, 0, 88, 1420, 1420, 1408, 51, 0, 1411,
			0, 1420, 1414, 0, 0, 1417, 21, 21, 1420, 0, 0, 1423, 0, 21, 1426, 0, 0,
			1429, 21, 0, 1435, 0, 0, 1441, 0, 0, 1438, 0, 21, 1531, 10, 21, 1444,
			1480, 1480, 1447, 51, 0, 1450, 0, 1480, 1453, 0, 0, 1456, 1481, 1481,
			1459, 51, 0, 1462, 0, 1481, 1465, 0, 0, 1468, 1487, 1487, 1471, 51, 0,
			1474, 0, 1487, 1477, 0, 0, 1480, 0, 0, 1483, 21, 0, 1486, 0, 0, 1489,
			0, 0, 1492, 1507, 1507, 1495, 20, 0, 1498, 0, 1507, 1501, 0, 0, 1504,
			23, 23, 1507, 0, 0, 1510, 0, 23, 1513, 0, 0, 1516, 20, 20, 1519, 23, 0,
			1522, 0, 20, 1525, 0, 0, 1528, 0, 0, 88, 9, 20, 1534, 10, 51, 1537, 0,
			0, 88, 27, 0, 1543, 0, 27, 1546, 0, 0, 1549, 27, 0, 1552, 0, 27, 1555,
			0, 0, 1558, 27, 0, 1561, 0, 27, 1564, 0, 0, 1567, 27, 0, 1570, 0, 27,
			1573, 0, 0, 1576, 27, 0, 1579, 0, 27, 1582, 0, 0, 1585, 27, 0, 1588,
			0, 27, 1591, 0, 0, 1594, 27, 0, 1597, 0, 27, 1600, 0, 0, 1603, 27, 0,
			1606, 0, 27, 1609, 0, 0, 1612, 27, 0, 1615, 0, 27, 1618, 0, 0, 1621,
			27, 0, 1624, 0, 27, 1627, 0, 0, 1630, 27, 0, 1633, 0, 27, 1636, 0, 0,
			1639, 27, 0, 1642, 0, 27, 1645, 0, 0, 1648, 27, 0, 1651, 0, 27, 1654,
			0, 0, 1657, 27, 0, 1660, 0, 27, 1663, 0, 0, 1666, 21, 21, 1669, 27, 0,
			1672, 0, 21, 1675, 0, 0, 1678, 27, 27, 1681, 0, 0, 1684, 0, 27, 1687,
			0, 0, 1690, 21, 0, 1696, 0, 0, 1702, 0, 0, 1699, 0, 21, 1714, 27, 27,
			1705, 9, 0, 1708, 0, 27, 1711, 0, 0, 1714, 0, 0, 88, 1732, 1732, 1720,
			20, 0, 1723, 0, 1732, 1726, 0, 0, 1729, 20, 20, 1732, 0, 0, 1735, 0, 20,
			1738, 0, 0, 1741, 0, 0, 88, 21, 21, 1747, 27, 0, 1750, 0, 21, 1753, 0,
			0, 1756, 23, 23, 1759, 0, 0, 1762, 0, 23, 1765, 0, 0, 1768, 21, 0, 1774,
			0, 0, 1780, 0, 0, 1777, 0, 21, 1792, 23, 23, 1783, 9, 0, 1786, 0, 23,
			1789, 0, 0, 1792, 10, 21, 1795, 0, 21, 1810, 23, 23, 1801, 9, 0, 1804,
			0, 23, 1807, 0, 0, 1810, 1825, 1825, 1813, 49, 0, 1816, 0, 1825, 1819,
			0, 0, 1822, 27, 27, 1825, 0, 0, 1828, 0, 27, 1831, 0, 0, 1834, 9, 49,
			1837, 23, 0, 1843, 0, 0, 1849, 0, 0, 1846, 0, 23, 1855, 9, 20, 1852, 0,
			0, 88, 1870, 1870, 1858, 20, 0, 1861, 0, 1870, 1864, 0, 0, 1867, 21, 21,
			1870, 0, 0, 1873, 0, 21, 1876, 0, 0, 1879, 20, 20, 1882, 21, 0, 1885,
			0, 20, 1888, 0, 0, 1891, 0, 0, 88, 21, 21, 1897, 27, 0, 1900, 0, 21,
			1903, 0, 0, 1906, 27, 27, 1909, 0, 0, 1912, 0, 27, 1915, 0, 0, 1918, 0,
			21, 1933, 27, 27, 1924, 9, 0, 1927, 0, 27, 1930, 0, 0, 1933, 0, 0, 88,
			21, 21, 1939, 27, 0, 1942, 0, 21, 1945, 0, 0, 1948, 27, 27, 1951, 9, 0,
			1954, 0, 27, 1957, 0, 0, 1960, 21, 0, 1966, 0, 0, 1972, 0, 0, 1969, 0,
			21, 1984, 27, 27, 1975, 0, 0, 1978, 0, 27, 1981, 0, 0, 1984, 10, 21,
			1987, 0, 21, 2002, 27, 27, 1993, 0, 0, 1996, 0, 27, 1999, 0, 0, 2002, 0,
			0, 88, 21, 21, 2008, 27, 0, 2011, 0, 21, 2014, 0, 0, 2017, 27, 27, 2020,
			0, 0, 2023, 0, 27, 2026, 0, 0, 2029, 21, 0, 2035, 0, 0, 2038, 0, 0, 2050,
			27, 27, 2041, 9, 0, 2044, 0, 27, 2047, 0, 0, 2050, 9, 21, 2053, 21, 0,
			2059, 0, 0, 2062, 0, 0, 2074, 27, 27, 2065, 9, 0, 2068, 0, 27, 2071, 0,
			0, 2074, 0, 0, 88, 2092, 2092, 2080, 49, 0, 2083, 0, 2092, 2086, 0, 0,
			2089, 21, 21, 2092, 0, 0, 2095, 0, 21, 2098, 0, 0, 2101, 9, 49, 2104,
			27, 21, 2107, 27, 27, 2110, 0, 0, 2113, 0, 27, 2116, 0, 0, 2119, 21, 0,
			2125, 0, 0, 2128, 0, 0, 2140, 27, 27, 2131, 9, 0, 2134, 0, 27, 2137, 0,
			0, 2140, 0, 0, 88, 2158, 2158, 2146, 49, 0, 2149, 0, 2158, 2152, 0, 0,
			2155, 21, 21, 2158, 0, 0, 2161, 0, 21, 2164, 0, 0, 2167, 9, 49, 2170,
			27, 21, 2173, 27, 27, 2176, 0, 0, 2179, 0, 27, 2182, 0, 0, 2185, 0, 21,
			2200, 27, 27, 2191, 9, 0, 2194, 0, 27, 2197, 0, 0, 2200, 0, 0, 88, 27,
			0, 2206, 0, 27, 2209, 0, 0, 2212, 0, 0, 88, 21, 21, 2218, 12, 0, 2221,
			0, 21, 2224, 0, 0, 2227, 22, 22, 2230, 10, 21, 2233, 21, 0, 2239, 0, 0,
			2245, 0, 0, 2242, 0, 21, 2350, 22, 0, 2248, 0, 22, 2251, 0, 0, 2254,
			26, 26, 2257, 27, 0, 2260, 0, 26, 2263, 0, 0, 2266, 24, 24, 2269, 0,
			0, 2272, 0, 24, 2275, 0, 0, 2278, 26, 0, 2284, 0, 0, 2287, 0, 0, 2299,
			24, 24, 2290, 9, 0, 2293, 0, 24, 2296, 0, 0, 2299, 9, 26, 2302, 26, 0,
			2308, 0, 0, 2311, 0, 0, 2323, 24, 24, 2314, 9, 0, 2317, 0, 24, 2320,
			0, 0, 2323, 24, 0, 2329, 0, 0, 2335, 0, 0, 2332, 0, 24, 2338, 9, 22,
			2338, 27, 0, 2341, 0, 27, 2344, 0, 0, 2347, 0, 0, 2230, 27, 27, 2353,
			22, 0, 2356, 0, 27, 2359, 0, 0, 2362, 0, 0, 88, 21, 21, 2368, 12, 0,
			2371, 0, 21, 2374, 0, 0, 2377, 27, 21, 2380, 2395, 2395, 2383, 49, 0,
			2386, 0, 2395, 2389, 0, 0, 2392, 27, 27, 2395, 0, 0, 2398, 0, 27, 2401,
			0, 0, 2404, 9, 49, 2407, 22, 22, 2410, 21, 0, 2416, 0, 0, 2422, 0, 0,
			2419, 0, 21, 2530, 22, 0, 2425, 0, 22, 2428, 0, 0, 2431, 26, 26, 2434,
			27, 0, 2437, 0, 26, 2440, 0, 0, 2443, 24, 24, 2446, 0, 0, 2449, 0, 24,
			2452, 0, 0, 2455, 26, 0, 2461, 0, 0, 2464, 0, 0, 2476, 24, 24, 2467, 9,
			0, 2470, 0, 24, 2473, 0, 0, 2476, 9, 26, 2479, 26, 0, 2485, 0, 0, 2488,
			0, 0, 2500, 24, 24, 2491, 9, 0, 2494, 0, 24, 2497, 0, 0, 2500, 24, 0,
			2506, 0, 0, 2512, 0, 0, 2509, 0, 24, 2515, 9, 22, 2515, 27, 0, 2518,
			0, 27, 2521, 0, 0, 2524, 10, 21, 2527, 0, 0, 2410, 27, 27, 2533, 22, 0,
			2536, 0, 27, 2539, 0, 0, 2542, 0, 0, 88, 21, 21, 2548, 12, 0, 2551, 0,
			21, 2554, 0, 0, 2557, 22, 22, 2560, 2575, 2575, 2563, 49, 0, 2566, 0,
			2575, 2569, 0, 0, 2572, 23, 23, 2575, 0, 0, 2578, 0, 23, 2581, 0, 0,
			2584, 9, 49, 2587, 21, 0, 2593, 0, 0, 2599, 0, 0, 2596, 0, 21, 2794,
			22, 0, 2602, 0, 22, 2605, 0, 0, 2608, 26, 26, 2611, 27, 0, 2614, 0, 26,
			2617, 0, 0, 2620, 24, 24, 2623, 0, 0, 2626, 0, 24, 2629, 0, 0, 2632, 26,
			0, 2638, 0, 0, 2641, 0, 0, 2653, 24, 24, 2644, 9, 0, 2647, 0, 24, 2650,
			0, 0, 2653, 9, 26, 2656, 26, 0, 2662, 0, 0, 2665, 0, 0, 2677, 24, 24,
			2668, 9, 0, 2671, 0, 24, 2674, 0, 0, 2677, 26, 26, 2680, 23, 0, 2683,
			0, 26, 2686, 0, 0, 2689, 25, 25, 2692, 0, 0, 2695, 0, 25, 2698, 0, 0,
			2701, 26, 0, 2707, 0, 0, 2710, 0, 0, 2722, 25, 25, 2713, 9, 0, 2716, 0,
			25, 2719, 0, 0, 2722, 9, 26, 2725, 26, 0, 2731, 0, 0, 2734, 0, 0, 2746,
			25, 25, 2737, 9, 0, 2740, 0, 25, 2743, 0, 0, 2746, 24, 0, 2749, 0, 25,
			2752, 0, 0, 2755, 25, 0, 2761, 0, 0, 2767, 0, 0, 2764, 0, 25, 2770, 9,
			22, 2770, 23, 0, 2773, 0, 23, 2776, 0, 0, 2779, 27, 0, 2782, 0, 27, 2785,
			0, 0, 2788, 10, 21, 2791, 0, 0, 2587, 27, 27, 2797, 22, 0, 2800, 0, 27,
			2803, 0, 0, 2806, 0, 0, 88, 21, 21, 2812, 12, 0, 2815, 0, 21, 2818, 0,
			0, 2821, 22, 22, 2824, 2839, 2839, 2827, 49, 0, 2830, 0, 2839, 2833, 0,
			0, 2836, 23, 23, 2839, 0, 0, 2842, 0, 23, 2845, 0, 0, 2848, 9, 49, 2851,
			21, 0, 2857, 0, 0, 2863, 0, 0, 2860, 0, 21, 3091, 22, 0, 2866, 0, 22,
			2869, 0, 0, 2872, 26, 26, 2875, 27, 0, 2878, 0, 26, 2881, 0, 0, 2884,
			24, 24, 2887, 0, 0, 2890, 0, 24, 2893, 0, 0, 2896, 26, 0, 2902, 0, 0,
			2905, 0, 0, 2917, 24, 24, 2908, 9, 0, 2911, 0, 24, 2914, 0, 0, 2917, 9,
			26, 2920, 26, 0, 2926, 0, 0, 2929, 0, 0, 2941, 24, 24, 2932, 9, 0, 2935,
			0, 24, 2938, 0, 0, 2941, 26, 26, 2944, 23, 0, 2947, 0, 26, 2950, 0, 0,
			2953, 25, 25, 2956, 0, 0, 2959, 0, 25, 2962, 0, 0, 2965, 26, 0, 2971,
			0, 0, 2974, 0, 0, 2986, 25, 25, 2977, 9, 0, 2980, 0, 25, 2983, 0, 0,
			2986, 9, 26, 2989, 26, 0, 2995, 0, 0, 2998, 0, 0, 3010, 25, 25, 3001, 9,
			0, 3004, 0, 25, 3007, 0, 0, 3010, 24, 0, 3013, 0, 25, 3016, 0, 0, 3019,
			9, 25, 3022, 24, 24, 3025, 10, 0, 3028, 0, 24, 3031, 0, 0, 3034, 25, 0,
			3040, 0, 0, 3046, 0, 0, 3043, 0, 25, 3058, 24, 24, 3049, 0, 0, 3052, 0,
			24, 3055, 0, 0, 3058, 24, 0, 3061, 0, 22, 3064, 0, 0, 3067, 23, 0, 3070,
			0, 23, 3073, 0, 0, 3076, 27, 0, 3079, 0, 27, 3082, 0, 0, 3085, 10, 21,
			3088, 0, 0, 2851, 27, 27, 3094, 22, 0, 3097, 0, 27, 3100, 0, 0, 3103,
			0, 0, 88, 21, 21, 3109, 12, 0, 3112, 0, 21, 3115, 0, 0, 3118, 22, 22,
			3121, 3136, 3136, 3124, 49, 0, 3127, 0, 3136, 3130, 0, 0, 3133, 23, 23,
			3136, 0, 0, 3139, 0, 23, 3142, 0, 0, 3145, 9, 49, 3148, 21, 0, 3154, 0,
			0, 3160, 0, 0, 3157, 0, 21, 3394, 22, 0, 3163, 0, 22, 3166, 0, 0, 3169,
			26, 26, 3172, 27, 0, 3175, 0, 26, 3178, 0, 0, 3181, 24, 24, 3184, 0,
			0, 3187, 0, 24, 3190, 0, 0, 3193, 26, 0, 3199, 0, 0, 3202, 0, 0, 3214,
			24, 24, 3205, 9, 0, 3208, 0, 24, 3211, 0, 0, 3214, 9, 26, 3217, 26, 0,
			3223, 0, 0, 3226, 0, 0, 3238, 24, 24, 3229, 9, 0, 3232, 0, 24, 3235, 0,
			0, 3238, 26, 26, 3241, 23, 0, 3244, 0, 26, 3247, 0, 0, 3250, 25, 25,
			3253, 0, 0, 3256, 0, 25, 3259, 0, 0, 3262, 26, 0, 3268, 0, 0, 3271,
			0, 0, 3283, 25, 25, 3274, 9, 0, 3277, 0, 25, 3280, 0, 0, 3283, 9, 26,
			3286, 26, 0, 3292, 0, 0, 3295, 0, 0, 3307, 25, 25, 3298, 9, 0, 3301,
			0, 25, 3304, 0, 0, 3307, 24, 0, 3310, 0, 25, 3313, 0, 0, 3316, 11, 0,
			3319, 0, 25, 3322, 0, 0, 3325, 24, 24, 3328, 10, 0, 3331, 0, 24, 3334,
			0, 0, 3337, 25, 0, 3343, 0, 0, 3349, 0, 0, 3346, 0, 25, 3361, 24, 24,
			3352, 0, 0, 3355, 0, 24, 3358, 0, 0, 3361, 24, 0, 3364, 0, 22, 3367,
			0, 0, 3370, 23, 0, 3373, 0, 23, 3376, 0, 0, 3379, 27, 0, 3382, 0, 27,
			3385, 0, 0, 3388, 10, 21, 3391, 0, 0, 3148, 27, 27, 3397, 22, 0, 3400,
			0, 27, 3403, 0, 0, 3406, 0, 0, 88, 439, 0, 1015, 439, 1, 1015, 439, -1,
			1015, 0, 12546, 43, 244, 1015, 6836, 12546, 45, 238, 1015, 6846, 11009,
			1090, 1015, 6856, 11521, 1045, 1015, 6864, 26886, 30318, 29285, 116, 250,
			1015, 6872, 25091, 25977, 232, 1015, 6886, 25603, 28789, 607, 1015, 6896,
			25604, 28530, 112, 751, 1015, 6906, 28420, 25974, 114, 661, 1015, 6918,
			29444, 24951, 112, 520, 1015, 6930, 29190, 26739, 26217, 116, 2365, 1015,
			0, 23299, 23872, 274, 1015, 6956, 23299, 23841, 301, 1015, 6966, 27651,
			25203, 1540, 1015, 6942, 29443, 16496, 1213, 1015, 6986, 29443, 8560,
			1282, 1015, 6996, 12290, 62, 1894, 1015, 7006, 12290, 61, 1936, 1015,
			7016, 12290, 60, 2005, 1015, 7026, 15361, 2077, 1015, 7036, 15873, 2143,
			1015, 7044, 12802, 47, 2215, 1015, 7052, 28418, 114, 2545, 1015, 7062,
			30723, 29295, 2809, 1015, 7072, 24835, 25710, 3106, 1015, 7082, 10753,
			943, 1015, 7092, 28163, 28783, 1015, 7100, 15364, 27503, 62, 439, 36,
			1015, 6976, 15366, 28005, 29801, 62, 439, 32, 1015, 7122, 15365, 25963,
			15993, 439, 30, 1015, 7138, 15369, 26988, 25972, 24946, 15980, 439, 34,
			1015, 7152, 15366, 28515, 25708, 62, 439, 28, 1015, 7170, 15366, 25445,
			28520, 62, 439, 38, 1015, 7108, 25351, 29301, 25970, 29806, 439, 88,
			1015, 7202, 29192, 28527, 11636, 28534, 99, 439, 92, 1015, 7218, 8965,
			28534, 29539, 439, 8, 1015, 7236, 25351, 28271, 25972, 29816, 439, 72,
			1015, 7250, 26628, 29285, 101, 439, 4, 274, 1015, 7266, 25092, 29537, 101,
			439, 60, 1015, 7282, 25603, 27760, 439, 62, 1015, 7296, 26627, 25708, 439,
			58, 1015, 7308, 25090, 108, 439, 32, 1015, 7320, 15875, 28265, 439, 64,
			1015, 7332, 26627, 30821, 439, 16, 439, 30, 301, 1015, 7344, 25607, 25445,
			28009, 27745, 439, 10, 439, 30, 301, 1015, 7362, 29446, 30063, 25458, 101,
			439, 32256, 439, 35, 274, 1015, 7186, 27908, 28257, 121, 3409, 439, 32,
			301, 1015, 7384, 29445, 24948, 25972, 439, 56, 1015, 7424, 23809, 3415,
			439, 28, 301, 1015, 7438, 23361, 3409, 439, 28, 301, 1015, 7452, 28163,
			28777, 520, 751, 1015, 7466, 29700, 25461, 107, 520, 661, 1015, 7478,
			16132, 30052, 112, 607, 1744, 3754, 607, 1015, 7492, 29187, 29807, 781,
			520, 862, 520, 1015, 7510, 11524, 28530, 116, 3758, 3758, 1015, 7526,
			12805, 29284, 28783, 751, 751, 1015, 7540, 12804, 30052, 112, 661, 661,
			1015, 7554, 12291, 15676, 1894, 1936, 1015, 7568, 12291, 15932, 1936,
			1936, 1015, 7580, 15617, 1045, 1936, 1015, 7592, 15362, 62, 3798, 1936,
			1015, 7602, 15874, 61, 2077, 1936, 1015, 7614, 15362, 61, 2143, 1936,
			1015, 7626, 12291, 15678, 2005, 1936, 1015, 7638, 28166, 26469, 29793,
			101, 238, 250, 1015, 7650, 29443, 25662, 607, 2005, 1015, 7666, 24835,
			29538, 3836, 1744, 3846, 3830, 1015, 7678, 12802, 42, 2203, 1015, 7694,
			25348, 27749, 108, 439, 2, 1015, 7704, 25349, 27749, 11116, 3856, 1090,
			1015, 7718, 25349, 27749, 29548, 2203, 1015, 7732, 29954, 60, 3781, 2005,
			1936, 520, 2005, 1936, 3804, 781, 2077, 862, 3804, 1015, 7744, 29954,
			62, 520, 3875, 1015, 7774, 29955, 15678, 3875, 1936, 1015, 7786, 29955,
			15676, 3890, 1936, 1015, 7798, 25863, 25976, 30051, 25972, 2215, 781,
			1015, 7810, 27396, 31077, 63, 3415, 274, 3830, 3836, 1744, 3935, 439, 3,
			274, 439, 8, 3106, 1744, 3932, 232, 751, 3409, 1015, 3415, 1015, 7826,
			27395, 31077, 439, 15, 274, 3910, 1744, 3940, 1015, 7874, 25860, 26989,
			116, 439, 16, 274, 3910, 1015, 7894, 25346, 114, 439, 13, 3951, 439,
			10, 3951, 1015, 7912, 16385, 2215, 274, 1015, 7932, 8449, 2215, 301,
			1015, 7942, 26379, 29797, 25389, 29301, 25970, 29806, 3606, 3968, 1015,
			7952, 29451, 29797, 25389, 29301, 25970, 29806, 3606, 3973, 1015, 7406,
			27652, 29537, 116, 3983, 3968, 1015, 7972, 28676, 25449, 107, 1213, 1090,
			274, 1015, 8006, 11010, 33, 2215, 3743, 274, 1090, 520, 301, 1015, 8022,
			27654, 26739, 26217, 116, 3750, 1744, 4035, 238, 520, 3850, 520, 1717,
			4026, 1015, 8042, 25346, 64, 607, 3968, 520, 1540, 1744, 4050, 439, 8,
			2365, 1717, 4053, 439, 255, 3106, 1015, 8072, 25346, 33, 520, 439, 255,
			3106, 607, 439, 8, 4026, 2545, 520, 3743, 607, 3968, 520, 1540, 1936,
			439, 255, 2809, 781, 661, 2809, 862, 3106, 2809, 520, 3973, 1015, 8108,
			27907, 30817, 3781, 2077, 1744, 4095, 3736, 1717, 4096, 751, 1015, 8170,
			27907, 28265, 3781, 2143, 1744, 4107, 3736, 1717, 4108, 751, 1015, 8194,
			25349, 30063, 29806, 607, 244, 520, 4039, 1015, 7992, 27655, 26479,
			25449, 27745, 3793, 1744, 4129, 3412, 1717, 4130, 3409, 1015, 8218,
			24839, 26988, 28263, 25701, 607, 1540, 4123, 1090, 1015, 8262, 24837,
			26988, 28263, 3637, 4136, 439, 4, 301, 1015, 8282, 11015, 29811, 26994,
			26478, 3412, 661, 4100, 3758, 661, 1090, 3758, 3758, 1045, 1015, 8302,
			29700, 28793, 101, 607, 1744, 4180, 520, 4113, 3951, 520, 238, 1717,
			4170, 3774, 1015, 8332, 25349, 28525, 25974, 781, 1717, 4197, 781, 607,
			4039, 1129, 4057, 244, 862, 244, 1405, 4189, 3774, 1015, 8364, 26116,
			27753, 108, 520, 781, 520, 1717, 4213, 3781, 4057, 244, 1405, 4210,
			3774, 1015, 8402, 25861, 24946, 25971, 3409, 4205, 1015, 8236, 25603,
			9327, 862, 862, 3850, 607, 4113, 1090, 4136, 2215, 781, 520, 781, 1015,
			8448, 10243, 10532, 4227, 1015, 8478, 11778, 36, 4227, 4113, 4170, 1015,
			8434, 29445, 24944, 25955, 3663, 3951, 1015, 8502, 25349, 29793, 26723,
			1213, 781, 439, 33, 274, 781, 1297, 439, 33, 301, 3910, 862, 439, 33,
			301, 1207, 3409, 1015, 8516, 29701, 29288, 30575, 3750, 1744, 4301, 439,
			33, 274, 1363, 862, 439, 33, 301, 862, 520, 781, 1282, 751, 862, 1015,
			8560, 24837, 28514, 29810, 3415, 4284, 1015, 8488, 10247, 25185, 29295,
			10612, 4227, 520, 1744, 4321, 4113, 4170, 4306, 751, 1015, 8604, 29955,
			11117, 3781, 1090, 781, 1129, 3409, 3810, 781, 3781, 3106, 2005, 862,
			2545, 781, 2545, 2005, 862, 3106, 250, 244, 862, 520, 1015, 8646, 25607,
			25966, 24935, 25972, 250, 781, 250, 3412, 4326, 862, 1090, 1015, 8696,
			25602, 43, 781, 520, 781, 4326, 862, 1090, 862, 1090, 1015, 8722, 29955,
			10861, 3409, 520, 439, 15, 781, 607, 4326, 781, 781, 607, 4326, 862, 1090,
			862, 1744, 4397, 781, 661, 4326, 862, 1090, 1405, 4381, 3758, 751, 1015,
			8746, 29958, 12141, 28525, 100, 3750, 1936, 1744, 4414, 439, -10, 4284,
			3781, 3875, 1744, 4457, 3830, 439, 15, 781, 781, 607, 4326, 781, 781, 607,
			4326, 862, 1090, 607, 862, 1129, 520, 781, 4326, 862, 3793, 520, 3793,
			1090, 1744, 4450, 781, 751, 244, 862, 1717, 4451, 751, 862, 1405, 4422,
			751, 520, 1015, 3774, 751, 3415, 607, 1015, 8804, 27909, 27951, 25711,
			3836, 607, 781, 1744, 4475, 3830, 781, 4353, 862, 781, 3836, 1744, 4481,
			1129, 1090, 862, 4407, 862, 1744, 4490, 520, 3830, 520, 1015, 1015, 8924,
			12036, 28525, 100, 661, 2005, 520, 4466, 1015, 8982, 27907, 25711, 4495,
			751, 1015, 9000, 12033, 4495, 3736, 1015, 8618, 25605, 28773, 26740, 439,
			48, 274, 1213, 1045, 238, 1015, 9022, 10246, 28005, 29801, 41, 406, 1015,
			9012, 25860, 26723, 111, 439, 19, 274, 3910, 1015, 9044, 29699, 28769,
			607, 4533, 661, 4057, 244, 1015, 9076, 27396, 24948, 112, 607, 607, 439,
			13, 3804, 781, 439, 10, 3804, 862, 3106, 1744, 4596, 607, 439, 8, 3804,
			781, 439, 127, 3804, 862, 3106, 1744, 4579, 3663, 4541, 1015, 781, 661,
			1129, 2077, 607, 1744, 4593, 439, 8, 607, 4533, 3663, 4533, 4533, 862,
			1090, 1015, 751, 3736, 607, 1015, 9058, 24838, 25443, 28773, 116, 661,
			1090, 661, 3781, 3804, 1744, 4627, 3940, 607, 3663, 1045, 439, 95, 3875,
			1744, 4624, 4541, 1717, 4625, 4551, 1717, 4608, 751, 661, 1045, 1015,
			9200, 28933, 25973, 31090, 439, 32256, 439, 256, 4605, 439, 70, 3973,
			751, 3409, 3669, 3973, 1015, 9094, 16134, 25956, 29808, 104, 4515, 2143,
			1744, 4660, 439, -4, 4284, 1015, 9262, 11529, 29300, 26977, 26988, 26478,
			781, 1717, 4681, 3663, 661, 1129, 1090, 4039, 2077, 1744, 4681, 862, 244,
			1015, 1405, 4670, 3409, 1015, 9296, 27652, 28527, 107, 520, 781, 3758,
			3758, 607, 1744, 4716, 661, 4039, 1129, 1045, 1129, 3663, 3798, 439, 4,
			4007, 3910, 1744, 4713, 1207, 3758, 751, 1015, 4156, 1717, 4693, 1207,
			3758, 751, 1015, 9370, 29959, 28014, 29793, 26723, 1744, 4729, 1894,
			1015, 3793, 1015, 9440, 27909, 29793, 26723, 4725, 250, 1015, 9322,
			28677, 29281, 25971, 781, 3697, 751, 3669, 3968, 1090, 439, 70, 3968,
			3669, 3968, 1045, 1129, 781, 661, 862, 520, 781, 781, 1129, 439, 9450,
			4689, 3781, 862, 439, 9470, 4689, 520, 862, 1045, 781, 1045, 862, 244,
			3669, 4014, 862, 3663, 3798, 1744, 4785, 4667, 3409, 4088, 1015, 9476,
			29446, 24944, 25955, 115, 607, 1894, 1744, 4801, 4255, 238, 1717, 4793,
			751, 1015, 9576, 26628, 27759, 100, 3415, 3657, 4014, 3657, 3968, 4057,
			1015, 9606, 8962, 62, 3774, 3657, 3968, 439, 32512, 661, 1045, 1015,
			9462, 25863, 29816, 24946, 29795, 607, 781, 4407, 862, 520, 781, 4407,
			862, 3758, 1015, 9650, 25605, 26473, 29801, 439, 9, 661, 2077, 439, 7,
			3106, 1090, 439, 48, 1090, 1015, 9628, 8961, 439, 2, 4653, 3409, 3645,
			3968, 4830, 4844, 4807, 1015, 9712, 8962, 115, 4858, 3781, 2545, 1936,
			1744, 4871, 1015, 9736, 15362, 35, 439, 32512, 3657, 3973, 1015, 9756,
			29444, 26473, 110, 2005, 1744, 4896, 439, 45, 4807, 1015, 9772, 29955,
			29230, 781, 3409, 4881, 4871, 4817, 862, 661, 1045, 4793, 4170, 1015,
			9794, 29954, 46, 3409, 4881, 4871, 4817, 4255, 4170, 1015, 9822, 11777,
			607, 781, 3842, 3409, 4881, 4871, 862, 4890, 4817, 4255, 4170, 1015, 9842,
			15879, 30062, 25197, 29285, 3781, 781, 781, 751, 4039, 3645, 3968, 781,
			439, 48, 1045, 439, 9, 661, 2077, 1744, 4965, 439, 7, 1045, 607, 439, 10,
			2077, 2545, 607, 862, 3875, 1936, 1744, 4975, 751, 862, 862, 1015, 520,
			3645, 3968, 4376, 751, 3758, 3645, 3968, 4376, 4364, 862, 862, 4156,
			607, 1936, 1744, 4940, 1015, 9870, 28167, 28021, 25954, 16242, 3415,
			3651, 3973, 3645, 3968, 781, 661, 4039, 439, 45, 3798, 607, 781, 1744,
			5014, 4156, 661, 4039, 439, 36, 3798, 1744, 5023, 3675, 4156, 781, 781,
			3409, 607, 862, 862, 4940, 607, 1744, 5058, 661, 4039, 439, 46, 3804,
			1744, 5050, 3758, 751, 3758, 862, 3774, 3409, 862, 3645, 3973, 1015,
			238, 3651, 3973, 244, 3651, 3968, 1717, 5029, 3774, 862, 1744, 5063,
			4353, 862, 3645, 3973, 3415, 1015, 9986, 25351, 28015, 24944, 25970,
			3758, 661, 1045, 3750, 1744, 5084, 781, 3774, 862, 3736, 1015, 781,
			1717, 5099, 4113, 3758, 4113, 3758, 1045, 3750, 1744, 5099, 1207, 3736,
			3736, 1015, 1405, 5087, 3774, 3409, 1015, 10136, 11778, 115, 4515, 781,
			1717, 5114, 1129, 4007, 4923, 1405, 5111, 1015, 10208, 28163, 24934,
			3863, 1015, 10234, 25347, 24934, 5120, 607, 4039, 439, 31, 3106, 1090,
			3863, 3856, 3830, 3106, 1015, 10244, 24837, 27756, 29807, 4136, 439,
			8, 4014, 1015, 10274, 11265, 4145, 3637, 3973, 3856, 5141, 1015, 9680,
			10257, 25971, 29281, 26723, 30509, 29295, 27748, 29545, 10612, 520, 781,
			607, 607, 1744, 5200, 607, 5120, 4113, 439, 159, 3106, 1129, 4113, 5073,
			1936, 1744, 5195, 1207, 607, 5120, 439, 64, 520, 3968, 3106, 3793, 3412,
			2545, 3830, 1015, 3736, 607, 3968, 1717, 5167, 1207, 3774, 3409, 1015,
			10308, 10246, 26982, 25710, 41, 781, 3630, 607, 3968, 1744, 5233, 607,
			3968, 3968, 1129, 520, 5164, 3750, 1744, 5230, 781, 3758, 751, 862, 1207,
			1015, 3863, 1717, 5211, 751, 3409, 862, 3409, 1015, 10292, 29455, 24933,
			25458, 11624, 28535, 25714, 26988, 29811, 5164, 3758, 751, 1015, 10476,
			26116, 28265, 100, 5209, 3758, 751, 1015, 10408, 10249, 26988, 25972,
			24946, 10604, 3716, 3968, 1744, 5273, 439, 439, 5148, 5148, 1015, 10502,
			27719, 29801, 29285, 27745, 3582, 3968, 3910, 1015, 10548, 25352, 28015,
			26992, 25964, 44, 2215, 4145, 5148, 1015, 10518, 16134, 28518, 28277,
			100, 1744, 5301, 1015, 4255, 4113, 4170, 439, 63, 3951, 3959, 439, -13,
			4284, 1015, 10566, 26889, 29806, 29285, 29296, 29797, 5255, 3750, 1744,
			5350, 3716, 3968, 1744, 5335, 1894, 1744, 5332, 5125, 3910, 1015, 5125,
			5289, 1015, 751, 607, 5120, 4039, 439, 32, 3106, 1744, 5347, 439, -14,
			4284, 5125, 3910, 1015, 607, 781, 4113, 4998, 1744, 5373, 1207, 3651,
			3968, 2005, 1744, 5365, 751, 1717, 5371, 3716, 3968, 1744, 5370, 520,
			5279, 5279, 1015, 862, 3409, 5298, 1015, 10586, 11779, 25705, 5120,
			4113, 439, 31, 3106, 4170, 4255, 1015, 10624, 26377, 29797, 28461, 25714,
			29285, 3630, 3409, 781, 607, 3968, 1129, 2809, 1744, 5406, 3863, 1717,
			5397, 1207, 607, 3856, 1045, 520, 3630, 1045, 2215, 607, 781, 238, 3836,
			1744, 5423, 439, -80, 4284, 781, 1717, 5431, 607, 3968, 520, 3856, 1045,
			1405, 5426, 3968, 862, 1015, 0, 29449, 29797, 28461, 25714, 29285, 607,
			3415, 3798, 1744, 5452, 751, 3615, 3412, 5442, 1015, 607, 3622, 2143,
			1744, 5460, 439, -73, 4284, 3630, 520, 781, 1717, 5468, 3743, 3973,
			3863, 1405, 5465, 3409, 520, 3973, 1015, 10872, 26126, 29295, 26740,
			30509, 29295, 27748, 29545, 116, 439, 90, 1015, 10948, 29446, 29561,
			25972, 109, 439, 94, 1015, 10972, 26117, 29295, 26740, 3615, 5483, 439,
			2, 5442, 1015, 10988, 28420, 27758, 121, 3415, 5442, 1015, 11008, 30469,
			29295, 29540, 5394, 3750, 1744, 5548, 520, 607, 3959, 4914, 4247, 14850,
			32, 3968, 3750, 1744, 5544, 607, 5120, 4039, 439, 128, 3106, 1936, 1744,
			5541, 607, 5380, 3968, 1717, 5527, 3959, 238, 1717, 5516, 1015, 10776,
			25611, 26213, 28265, 29801, 28521, 29550, 3630, 3968, 3993, 1015, 11098,
			10247, 29295, 25956, 10610, 607, 1744, 5582, 238, 520, 781, 5565, 661,
			1129, 2809, 1744, 5581, 244, 862, 3767, 1015, 1207, 1015, 11120, 11526,
			29295, 25956, 114, 5394, 5565, 3736, 5442, 1015, 11166, 11014, 29295,
			25956, 114, 607, 781, 5588, 5394, 862, 520, 244, 5442, 1015, 11186,
			30468, 29295, 100, 4742, 3637, 607, 781, 3781, 3973, 244, 520, 4186,
			862, 1015, 10754, 16135, 28277, 29033, 25973, 607, 3983, 5164, 1936,
			1744, 5634, 1015, 4255, 3774, 439, 68, 3968, 5380, 4247, 29193, 25701,
			26213, 28265, 25701, 3959, 1015, 11244, 16132, 30062, 108, 607, 4039,
			1744, 5657, 1015, 439, -16, 4284, 1015, 11214, 25348, 24936, 114, 3663,
			5611, 5652, 4113, 751, 4039, 1015, 11322, 23366, 26723, 29281, 93, 5665,
			439, 439, 5148, 5148, 1015, 11344, 15201, 439, -17730, 3804, 1744, 5693,
			439, -22, 4284, 439, 1015, 5148, 3728, 3750, 1744, 5703, 3983, 3973,
			1015, 1015, 11366, 14849, 4145, 3637, 607, 439, 68, 3973, 4000, 5148,
			3663, 5611, 5652, 5627, 4113, 1090, 439, 8, 3973, 4145, 439, -17730,
			3721, 1015, 11408, 14855, 28526, 24942, 25965, 3637, 439, -17730, 3721,
			1015, 11456, 25189, 26469, 28265, 4145, 3637, 1015, 11476, 30053, 29806,
			27753, 439, 1744, 5148, 2215, 5148, 1015, 11490, 24933, 24935, 28265, 439,
			1717, 5148, 2215, 5148, 1015, 11510, 26978, 102, 439, 1744, 5148, 3637,
			3409, 5148, 1015, 11530, 29796, 25960, 110, 3637, 2215, 520, 3973, 1015,
			11550, 30565, 26984, 25964, 5768, 1015, 11568, 29286, 28773, 24933, 116,
			520, 5759, 5779, 1015, 11580, 25956, 29548, 101, 439, 1717, 5148, 3637,
			3409, 5148, 520, 5779, 1015, 11598, 26211, 29295, 439, 781, 5148, 3637,
			1015, 11624, 24931, 29798, 751, 439, 1717, 5148, 3637, 3409, 5148, 4145,
			3637, 520, 1015, 11640, 28260, 30821, 116, 439, 1405, 5148, 2215, 5148,
			1015, 11668, 10049, 3663, 5611, 5255, 5298, 5125, 5279, 1015, 11688,
			25383, 28015, 26992, 25964, 862, 607, 274, 5148, 244, 781, 1015, 11706,
			29287, 25445, 29301, 25971, 439, 68, 3968, 5125, 5289, 1015, 11296,
			29702, 26479, 27751, 101, 3743, 3968, 2809, 520, 3973, 1015, 11752,
			26628, 25705, 101, 3663, 5611, 5255, 5298, 5120, 439, 128, 520, 5881,
			1015, 11774, 10245, 24950, 10610, 862, 3850, 1015, 11802, 10247, 28515,
			29550, 10612, 862, 274, 1015, 11816, 10248, 24941, 27506, 29285, 41, 862,
			3850, 607, 3968, 439, 8, 3973, 3863, 3968, 3983, 3973, 1015, 11730, 25350,
			25970, 29793, 101, 5706, 751, 3728, 5858, 5905, 3983, 3973, 1015, 11868,
			30216, 29281, 24937, 27746, 101, 5939, 3409, 5148, 1015, 11894, 25352,
			28271, 29811, 28257, 116, 5939, 3856, 3830, 5141, 5858, 5913, 5148, 1015,
			11914, 27910, 29281, 25963, 114, 4000, 3637, 5939, 3856, 3830, 5141, 5858,
			5922, 5148, 5148, 1015, 11942, 15909, 28514, 31076, 3863, 1015, 11832,
			10246, 28516, 29541, 41, 862, 862, 3850, 520, 781, 1015, 11986, 10246,
			28515, 28781, 41, 862, 439, 68, 3968, 5125, 3973, 1015, 11974, 25701,
			25967, 15987, 5858, 6009, 5858, 5998, 1015, 12032, 29283, 8560, 5858,
			1363, 1015, 12050, 29283, 16496, 5858, 1297, 1015, 12062, 15970, 114,
			5858, 781, 1015, 12074, 29282, 62, 5858, 862, 1015, 12086, 29282, 64,
			5858, 1129, 1015, 12098, 29285, 29284, 28783, 5858, 1207, 1015, 12110,
			25956, 27000, 116, 5858, 1015, 1015, 12124, 11874, 34, 5858, 4247, 439,
			34, 5611, 4113, 1090, 439, 4, 301, 4145, 1015, 12138, 9314, 34, 5858,
			4242, 439, 34, 5611, 4113, 1090, 439, 4, 301, 4145, 1015, 12168, 24934,
			28514, 29810, 34, 5858, 4314, 439, 34, 5611, 4113, 1090, 439, 4, 301,
			4145, 1015, 12198, 10305, 439, 41, 4742, 3774, 1015, 12232, 11842, 40,
			439, 41, 4742, 4170, 1015, 12246, 28744, 29551, 28788, 28271, 101, 3663,
			5611, 5255, 5298, 5125, 5289, 1015, 12262, 10561, 1015, 12288, 23617,
			3697, 751, 3968, 439, 32, 301, 1015, 12294, 26889, 28013, 25701, 24937,
			25972, 4000, 5120, 3968, 439, 64, 2545, 4000, 5120, 3973, 1015, 12312,
			29443, 25957, 3663, 5611, 5255, 5298, 3959, 607, 3968, 439, 1015, 3804,
			1744, 6193, 607, 3968, 4914, 3863, 1717, 6180, 3968, 4914, 1015, 12344,
			25604, 28021, 112, 4136, 3750, 1744, 6214, 520, 607, 3968, 4923, 3863,
			520, 3856, 1045, 1717, 6201, 751, 1015, 12008, 25349, 29547, 28021,
			4136, 607, 439, -16162, 1045, 781, 3750, 1744, 6241, 520, 607, 3968,
			862, 1090, 781, 3863, 520, 3856, 1045, 1717, 6226, 751, 862, 1015, 12432,
			28418, 107, 3716, 3968, 1936, 1744, 6256, 4247, 8195, 27503, 3959, 1015,
			12392, 25860, 24950, 108, 3663, 5611, 607, 4039, 1744, 6272, 5318, 3412,
			4653, 1717, 6261, 751, 439, 18, 274, 3910, 1015, 12488, 26884, 26222,
			111, 3959, 4247, 20501, 28530, 25962, 29795, 8250, 18021, 29295, 26740,
			30240, 11825, 8245, 3959, 4247, 16667, 29813, 28520, 14962, 8224, 26962,
			26723, 29281, 8292, 24906, 25965, 8307, 28488, 25975, 3959, 4247, 17694,
			24941, 27753, 8250, 8224, 28520, 25975, 29230, 27182, 14382, 16441, 28007,
			26977, 11884, 28515, 109, 3959, 4247, 21033, 28773, 14959, 8224, 8224,
			29800, 28788, 14963, 12079, 26983, 26740, 25205, 25390, 28015, 26671,
			30575, 29285, 12138, 30067, 27746, 29029, 3959, 4247, 19494, 25449,
			28261, 25971, 8250, 26708, 8293, 28245, 26988, 25955, 29550, 8293, 8239,
			30032, 27746, 25449, 17440, 28015, 26977, 110, 3959, 1015, 12556, 26883,
			26990, 5508, 5498, 5556, 3686, 3728, 3409, 439, 32, 301, 3415, 439, 31,
			301, 1015, 12752, 28420, 29808, 115, 439, 3, 274, 1540, 1744, 6408, 439,
			6914, 439, 19, 301, 439, 3, 274, 439, 4, 3106, 1744, 6417, 6282, 439, 3,
			274, 439, 2, 3106, 1744, 6457, 439, 5, 274, 3850, 607, 3637, 520, 1045,
			6220, 439, 6, 274, 3804, 1744, 6448, 4247, 25354, 29547, 28021, 26144,
			26977, 108, 232, 439, 3, 274, 439, 2, 2809, 439, 3, 301, 1015, 12514,
			28932, 26997, 116, 6379, 6397, 4635, 439, 12522, 4262, 3750, 1744, 6484,
			607, 4255, 4923, 439, 63, 3951, 3959, 3415, 3798, 1744, 6483, 232, 6379,
			1717, 6464, 1015, 12916, 25348, 27759, 100, 439, 14, 274, 3910, 1015
		];

		function updateDump() {
			function dump(a, as, base) {
				function maxPad(max, base) {
					return Math.ceil(Math.log(max) / Math.log(base));
				}
				function pad(number, length) {
					var str = '' + number;
					while (str.length < length) str = '0' + str;
					return str;
				}
				var r = "", p = maxPad(65536, base), cols = 20 - p;
				for (let i = 0; i < as; i += cols) {
					var l = pad(i.toString(base), p) + ": ";
					for (let j = 0; j < cols && (i + j) < as; j++) {
						l += pad(m[i+j].toString(base), p) + " ";
					}
					r += l + "\n";
				}
				return r;
			}
			let base = document.getElementById("base").value;
			base = base > 36 || base < 2 ? 16 : base;
			document.getElementById("dump").innerHTML = dump(m, 65536, base);
		}

		function openTab(evt, name) {
			let tabcontent = document.getElementsByClassName("tabcontent");
			for (let i = 0; i < tabcontent.length; i++) { tabcontent[i].style.display = "none"; }
			let tablinks = document.getElementsByClassName("tablinks");
			for (let i = 0; i < tablinks.length; i++) { tablinks[i].className = tablinks[i].className.replace(" active", ""); }
			document.getElementById(name).style.display = "block";
			evt.currentTarget.className += " active";
			focused = false;
			switch (name) {
			case "subleq": queueDraw(); focused = true; break;
			case "image": updateDump(); break;
			}
		}

		function saveImage() {
			function isNumeric(str) {
				if (typeof str != "string") return false;
				return !isNaN(str) && !isNaN(parseFloat(str));
			}
			function save(filename, data) {
				var blob = new Blob([data], {type: 'text/plain'});
				if (window.navigator.msSaveOrOpenBlob) {
					window.navigator.msSaveBlob(blob, filename);
					return;
				}
				var elem = window.document.createElement('a');
				elem.href = window.URL.createObjectURL(blob);
				elem.download = filename;
				document.body.appendChild(elem);
				elem.click();
				document.body.removeChild(elem);
			}
			let filename = document.getElementById("fname").value;
			let cells = document.getElementById("cells").value;
			filename = filename == undefined || filename === "" ? "subleq.dec" : filename;
			cells = isNumeric(cells) ? parseInt(cells) : 8192;
			if (cells < 0)
				cells = 0;
			if (cells > 65536)
				cells = 65536;
			let x = "";
			for (let i = 0; i < cells; i++)
				x += m[i].toString() + "\n";
			if (document.getElementById('optimizeImage').checked)
				x = x.replace(/(0\n)+$/g, '');
			save(filename, x);
		}

		function loadImageFromArray(a) {
			for (var i = 0; i < 65536; i++)
				m[i] = undefined == a[i] ? 0 : a[i];
			loaded = true;
		}

		function loadImage() {
			function loadImageFromString(str) {
				var txt = str.split(/\r?\n/g);
				for (var i = 0; i < 65536; i++)
					m[i] = undefined == txt[i] ? 0 : parseInt(txt[i]);
				loaded = true;
			}
			document.getElementById('input').files[0].text().then(t =>{ loadImageFromString(t); updateDump()});
			pc = 0;
			screen = "";
			input = init;
		}

		function saveCookies() {
			function setCookie(cname, cvalue, exdays) {
				let d = new Date();
				d.setTime(d.getTime() + (exdays * 24 * 60 * 60 * 1000));
				let expires = "expires="+ d.toUTCString();
				document.cookie = cname + "=" + cvalue + "; SameSite=Strict; " + expires + ";path=/";
			}
			let expire = 365;
			setCookie("highlight",     document.getElementById('highlight').checked,     expire);
			setCookie("scroll",        document.getElementById('scroll').checked,        expire);
			setCookie("optimizeImage", document.getElementById('optimizeImage').checked, expire);
			setCookie("base",          document.getElementById("base").value,            expire);
		}

		function setValuesFromCookies() {
			function getCookie(cname, defaultVal) {
				let name = cname + "=";
				let decodedCookie = decodeURIComponent(document.cookie);
				let ca = decodedCookie.split(';');
				for(let i = 0; i < ca.length; i++) {
					let c = ca[i];
					while (c.charAt(0) == ' ')
						c = c.substring(1);
					if (c.indexOf(name) == 0)
						return c.substring(name.length, c.length);
				}
				return defaultVal;
			}
			document.getElementById('highlight').checked     = getCookie("highlight", "true") == "true" ? true : false;
			document.getElementById('scroll').checked        = getCookie("scroll", "true") == "true" ? true : false;
			document.getElementById('optimizeImage').checked = getCookie("optimizeImage", "true") == "true" ? true : false;
			document.getElementById("base").value            = getCookie("base", 16);
		}

		function esc(i) {
			i = i.replace(/&/g, '&amp;');
			i = i.replace(/</g, '&lt;');
			return i.replace(/>/g, '&gt;');
		}

		function highlight(i) { /* good enough, could also <u> things */
			if (!document.getElementById('highlight').checked)
				return i;
			i = i.replace(/\b[0-9]+[^a-zA-Z=<>*\(\)\/@+&-]/g, function(x) { return "<b>" + x + "</b>" });
			return i.replace(/\b(if|else|for|next|aft|then|while|begin|repeat|until|again)\b/g, function(x) { return "<i>" + x + "</i>" });
		}

		function doDraw() {
			document.getElementById('subleq').innerHTML = "<pre>" + highlight(esc(screen)) + cursor + "</pre>";
			if (document.getElementById('scroll').checked)
				window.scrollTo(0, document.body.scrollHeight);
		}

		function queueDraw() { /* might be better with two timers, so redraw is done at least every X ms */
			if (redrawTimeout) { /* expensive operation, do not redraw every key-press */
				clearTimeout(redrawTimeout);
				redrawTimeout = null;
			}
			redrawTimeout = setTimeout(doDraw, 50);
		}

		function backspace() {
			let last = screen.slice(-1);
			if (last != '\n' && last != '\r')
				screen = screen.substring(0, screen.length - 1);
		}

		function keyToKey(k) { /* NB. Fun to funky */
			switch (k) {
			case "Enter": return '\n';
			case "Escape": return '\u001B';
			case "Delete": case "Backspace": return '\u0008';
			default: if (k.length != 1) k = ''; return k;
			}
		}

		document.documentElement.addEventListener('keydown', function (e) {
			if (!focused) return false;
			var k = keyToKey(e.key);
			if (k.length === 0) { return false; }
			else if (k === '\u0008') { backspace(); }
			else if (k === '\u001B') { running = false; return false; }
			else { screen += k; }
			input += k;
			queueDraw();
			return false;
		}, false);

		function getch() {
			if (input.length === 0)
				return -1;
			let r = input.charCodeAt(0);
			input = input.substring(1);
			return r;
		}

		function putch(ch) {
			let o = String.fromCharCode(ch);
			if (o === '\u0008') { backspace(); }
			else { screen += o; }
			queueDraw();
		}

		function subleq() { /* The ISA of the future! */
			if (!loaded) { setTimeout(subleq, 20); return; }
			while ((pc & 0x8000) === 0 && running) {
				if (cycles++ > 10000000 || !focused) { cycles = 0; setTimeout(subleq, 10); return; }
				let a = m[pc+0];
				let b = m[pc+1];
				let c = m[pc+2];
				if (a === 0xFFFF) {
					let ch = getch();
					if (ch < 0) {
						setTimeout(subleq, 20);
						return;
					}
					m[b] = ch;
					pc += 3;
				} else if (b === 0xFFFF) {
					putch(m[a]);
					pc += 3;
				} else {
					let d = m[b] - m[a];
					m[b] = d;
					pc = (d & 0x8000) || (d === 0) ? c : pc + 3;
				}
				pc &= 0xFFFF;
				total++;
			}
			if (reloadOnExit)
				window.location.reload();
		}
		document.getElementsByClassName('tablinks')[0].click();
		setValuesFromCookies();
		console.log("subleq running...");
		loadImageFromArray(eForth);
		queueDraw();
		subleq();
	</script>
</body>
</html>
